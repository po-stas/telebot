# Review Analyzer
Итоговый проект на курсе "Машинное обучение в бизнесе".

###### Это роль ругательная - я прошу её ко мне не применять! (Иван Васильевич меняет профессию)

С начала курса хотелось поработать с анализом текстовой информации. 
В поисках темы наткнулся на датасет на Kaggle, содержащий рецензии на кинофильмы. 
https://www.kaggle.com/lakshmi25npathi/imdb-dataset-of-50k-movie-reviews?select=IMDB+Dataset.csv 
с размеченными оценками окрасок рецензий (негативная/позитивная). 
Тема заинтересовала, но датасет содержал разумеется только англоязычные тексты, 
а хотелось чего-нибудь более релевантного нашей действительности.
В итоге проект начался с написания "сборщика" рецензий с "Кинопоиска" - благо окраска рецензии там уже проставлена
В процессе сбора информации было получено около 1700 рецензий наподобие вот таких: https://www.kinopoisk.ru/film/838050/reviews/
(возможно с повторениями - если фильм входил сразу в несколько категорий)
Эмоциональная окраска там не бинарна - а имеет три состояния (плохо/нейтрально/хорошо)

#### Проект сделан в виде веб-сервиса. 
У сервиса реализованы три функции. Сбор информации с Кинопоиска, Тренировка модели, и собственно Анализ пользовательской реценции на предмет предсказания эмоциональной окраски.
- Функция сбора данных запускается если зайти на /fetch_data/ (это впрочем глупость - для реального сервиса - так делать. По хорошему наверное эта функция должна работать в фоне по cron или подобным образом)
Сбор данных длится 4-5 минут. Заканчивается формированием датасета реценцзий и выводом сообщения об окончании процесса сбора.

- Функция тренировки модели доступна по /fit_model/. По окончании выводятся результирующие скоры.

- Функция анализа (единственное, что нужно было бы оставить для доступа извне) вызывается при посещении /check_review/ - имеет web интерфейс. По хорошему, для такого сервиса больше подошел бы api-вариант, но ничего сложного в этом нет - поэтому не стал реализовывать это ))

#### Протестировать работоспособность

Сейчас сервис запущен в тестовых целях и доступен по адресу http://18.184.14.212:5000/. Будет работать еще несколько дней как минимум.
Можно зайти на http://18.184.14.212:5000/check_review/ и попробовать проанализировать что-нибудь )

#### ML часть.
Собственно в плане ML ничего особо выдающегося получить не удалось :(
К репозиторию приложен ноутбук где разрабатывалась модель. Там можно увидеть качество полученной модели.
Возможно одна из проблем в том, что изначально датасет довольно сильно несбалансирован в сторону положительных рецензий.
Возможно просто не хватает опыта и понимания в какую сторону двигаться в плане улучшения качества модели для такого рода работы.
Модель довольно сильно переобучена, с очень низким показателем полноты для отрицательного и нейтрального классов.

### Инсталляция
Если есть желание развернуть сервис самостоятельно, клонируем репозиторий, собираем и запускаем docker образ.
```
git clone https://github.com/po-stas/review_analyzer.git
cd review_analyzer
sudo docker-compose build
sudo docker-compose up
```
Единственное, в приложение включен sklearn - а он требует очень большого времени на сборку. 
Это конечно тоже не очень правильное решение - но раз уж была такая идея - с возможностью обновления тренировочных данных - то пришлось психануть и пойти на это ))

После установки впринципе необязательно собирать данные и тренировать модель - готовый датасет и готовая модель поставляются в комплекте. Можно сразу идти на your_ip:5000/check_review/

 
